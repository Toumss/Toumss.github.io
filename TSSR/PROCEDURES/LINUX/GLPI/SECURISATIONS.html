<html>
  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../../../style.css">
    <base target="_parent">
    <title data-trilium-title>SECURISATIONS</title>
  </head>
  
  <body>
    <div class="content">
       <h1 data-trilium-h1>SECURISATIONS</h1>

      <div class="ck-content">
        <p><span class="text-big"><strong>SECURISATIONS</strong></span>
        </p>
        <p>&nbsp;</p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Ensuite, nous allons devoir </span><strong>créer plusieurs dossiers</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">et sortir des données de la racine Web (/var/www/glpi) de manière à les
            stocker dans les nouveaux dossiers que nous allons créer. De manière à
            sécurisé GLPI.</span>
        </p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">On commence par </span>créer
          le répertoire<strong> "/etc/glpi"</strong><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);"> qui va recevoir les fichiers de configuration de GLPI.&nbsp;</span>
        </p><pre><code class="language-text-plain">mkdir /etc/glpi</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Nous donnons des autorisations à www-data sur ce répertoire car il a besoin de pouvoir y accéder :</span>
        </p><pre><code class="language-text-plain">chown www-data /etc/glpi/</code></pre>
        <p>&nbsp;</p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Puis, nous allons déplacer le répertoire <strong>"config"</strong> de GLPI vers ce nouveau dossier :</span>
        </p><pre><code class="language-text-plain">mv /var/www/glpi/config /etc/glpi</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">On répéte la même opération avec la création du répertoire <strong>"/var/lib/glpi"</strong> :</span>
        </p><pre><code class="language-text-plain">mkdir /var/lib/glpi</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Nous donnons des autorisations à www-data sur ce répertoire car il a besoin de pouvoir y accéder :</span>
        </p><pre><code class="language-text-plain">chown www-data /var/lib/glpi/</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Dans lequel nous déplaçons également le dossier "</span><strong>files</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">" qui contient la majorité des fichiers de GLPI : CSS, plugins, etc :</span>
        </p><pre><code class="language-text-plain">mv /var/www/glpi/files /var/lib/glpi</code></pre>
        <p>&nbsp;</p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">On termine par la création du répertoire "</span><strong>/var/log/glpi</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">" destiné à stocker les journaux de GLPI. Toujours sur le même principe
            :</span>
        </p><pre><code class="language-text-plain">sudo mkdir /var/log/glpi
sudo chown www-data /var/log/glpi</code></pre>
        <p>&nbsp;</p>
        <p style="margin-left:0px;">Nous devons configurer GLPI pour qu'il sache où aller chercher les données.
          Autrement dit, nous allons déclarer les nouveaux répertoires fraichement
          créés.</p>
        <p style="margin-left:0px;">Nous allons créer ce premier fichier :</p><pre><code class="language-text-plain">nano /var/www/glpi/inc/downstream.php</code></pre>
        <p>Un répertoire s'ouvre dans lequel on entre :</p><pre><code class="language-text-plain">&lt;?php
define('GLPI_CONFIG_DIR', '/etc/glpi/');
if (file_exists(GLPI_CONFIG_DIR . '/local_define.php')) {
    require_once GLPI_CONFIG_DIR . '/local_define.php';
}</code></pre>
        <p>Ca doit nous donner quelque chose comme ça :</p>
        <p>&nbsp;</p>
        <figure class="image">
          <img src="SECURISATIONS/WindowsTerminal_DcHkIgADVF.png">
        </figure>
        <p><i>On quitte le fichier avec un “ctrl + x” et dire “oui” pour sauvegarder</i>
        </p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Ensuite, nous allons créer ce second fichier :</span>
        </p><pre><code class="language-text-plain">nano /etc/glpi/local_define.php</code></pre>
        <p>Un répertoire s'ouvre dans lequel on entre :</p><pre><code class="language-text-plain">&lt;?php
define('GLPI_VAR_DIR', '/var/lib/glpi/files');
define('GLPI_LOG_DIR', '/var/log/glpi');</code></pre>
        <p>Ca doit nous donner quelque chose comme ça :&nbsp;</p>
        <figure class="image">
          <img src="SECURISATIONS/WindowsTerminal_U5vj4tTwat.png">
        </figure>
        <p><i>On quitte le fichier avec un “ctrl + x” et dire “oui” pour sauvegarder</i>
        </p>
      </div>
    </div>
  </body>

</html>