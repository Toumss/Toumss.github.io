<html>
  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../../../style.css">
    <base target="_parent">
    <title data-trilium-title>CONFIGURATION SERVER WEB APACHE2</title>
  </head>
  
  <body>
    <div class="content">
       <h1 data-trilium-h1>CONFIGURATION SERVER WEB APACHE2</h1>

      <div class="ck-content">
        <p><span class="text-big"><strong>CONFIGURATION SERVER WEB APACHE2</strong></span>
        </p>
        <p>&nbsp;</p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Nous allons créer un nouveau fichier de configuration qui va permettre de configurer le VirtualHost dédié à GLPI. Dans mon cas, le fichier s'appelle "tssr.local.conf" en référence au nom de domaine choisi pour accéder à GLPI : </span><strong>tssr.local</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">.&nbsp;</span>
        </p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">L'idéal étant d'avoir un nom de domaine (même interne) pour accéder à GLPI afin de pouvoir positionner un certificat SSL par la suite.</span>
        </p><pre><code class="language-text-plain">nano /etc/apache2/sites-available/tssr.local.conf</code></pre>
        <p>On entre les lignes suivante :</p><pre><code class="language-text-plain">&lt;VirtualHost *:80&gt;
    ServerName tssr.local

    DocumentRoot /var/www/glpi/public

    # If you want to place GLPI in a subfolder of your site (e.g. your virtual host is serving multiple applications),
    # you can use an Alias directive. If you do this, the DocumentRoot directive MUST NOT target the GLPI directory itself.
    # Alias "/glpi" "/var/www/glpi/public"

    &lt;Directory /var/www/glpi/public&gt;
        Require all granted

        RewriteEngine On

        # Redirect all requests to GLPI router, unless file exists.
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ index.php [QSA,L]
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;</code></pre>
        <p>Ca doit nous donner quelque chose comme ça :</p>
        <p>&nbsp;</p>
        <figure class="image">
          <img src="CONFIGURATION%20SERVER%20WEB%20APACHE2/WindowsTerminal_gUgVv585NU.png">
        </figure>
        <p><i>On quitte le fichier avec un “ctrl + x” et dire “oui” pour sauvegarder</i>
        </p>
        <p>&nbsp;</p>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Puis, nous allons </span><strong>activer ce nouveau site dans Apache2</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">:</span>
        </p><pre><code class="language-text-plain">a2ensite tssr.local.conf</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Nous en profitons également pour </span><strong>désactiver le site par défaut</strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">car il est inutile :</span>
        </p><pre><code class="language-text-plain">a2dissite 000-default.conf</code></pre>
        <p><span style="background-color:rgb(255,255,255);color:rgb(68,68,68);">Nous allons aussi</span><strong> activer le module "rewrite" </strong>
          <span
          style="background-color:rgb(255,255,255);color:rgb(68,68,68);">(pour les règles de réécriture) car on l'a utilisé dans le fichier de
            configuration du VirtualHost (</span><i>RewriteCond / RewriteRule</i>
            <span
            style="background-color:rgb(255,255,255);color:rgb(68,68,68);">) :</span>
        </p><pre><code class="language-text-plain">a2enmod rewrite</code></pre>
        <p>Pour que toutes nos commandes prennent effet il faut restart avec la commande
          :</p><pre><code class="language-text-plain">systemctl restart apache2</code></pre>
      </div>
    </div>
  </body>

</html>