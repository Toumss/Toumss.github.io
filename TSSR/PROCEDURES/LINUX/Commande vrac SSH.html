<html>
  
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../../style.css">
    <base target="_parent">
    <title data-trilium-title>Commande vrac SSH</title>
  </head>
  
  <body>
    <div class="content">
       <h1 data-trilium-h1>Commande vrac SSH</h1>

      <div class="ck-content">
        <p><span style="background-color:#ffff00;color:#000000;"><strong>Commandes en vrac SSH :&nbsp;</strong></span>
        </p>
        <p>&nbsp;</p>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Installer SSH sur un serveur</u></strong><u> </u>:&nbsp;</span>
        </p><pre><code class="language-text-plain">apt install openssh-server</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Redémarrer SSH</u></strong> :&nbsp;</span>
        </p><pre><code class="language-text-plain">systemctl restart ssh</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Voir le status SSH</u></strong> :&nbsp;</span>
        </p><pre><code class="language-text-plain">systemctl status ssh</code></pre>
        <p><span style="background-color:transparent;color:#000000;">ou :&nbsp;</span>
        </p><pre><code class="language-text-plain">ss -pruant</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Se connecter en spécifiant le port</u> :</strong> -p</span>
        </p><pre><code class="language-text-plain">ssh toto@172.16.190.24 -p 2222</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Exécuter une commande ssh à distance avec les droits sudo</u></strong> :&nbsp;</span>
        </p><pre><code class="language-text-plain">-t et sudo : </code></pre><pre><code class="language-text-plain">apt-get upgrade -y</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Voir quel port utilise le ssh</u> :&nbsp;</strong></span>
        </p><pre><code class="language-text-plain">systemctl status ssh</code></pre>
        <p><span style="background-color:transparent;color:#000000;">ou :&nbsp;</span>
        </p><pre><code class="language-text-plain">ss -pruant</code></pre>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Sécurisation SSH</u> :&nbsp;</strong></span>
        </p>
        <p><span style="background-color:transparent;color:#000000;">Fail2ban : bannir adresse ip après x mauvais mots de passe</span>
        </p>
        <p><span style="background-color:transparent;color:#000000;">port-knocking : suite de ping sur des ports&nbsp;</span>
        </p>
        <p><span style="background-color:transparent;color:#000000;"><strong><u>Prendre la main en ssh sur un Linux</u> :</strong></span>
        </p>
        <p><span style="background-color:transparent;color:#000000;">ssh debian@192.168.240.147</span>
        </p>
        <p><span style="background-color:transparent;color:#000000;">si besoin d’info sur la connexion : ajouter les -vvv</span>
        </p><pre><code class="language-text-plain">ssh -vvvv : </code></pre>
        <p><span style="background-color:transparent;color:#000000;">va donner des détails sur la connexion</span>
        </p>
        <p><span style="background-color:#ffffff;color:#303030;"><strong><u>Exécuter une commande à distance sans se connecter en ssh depuis le PC Windows</u></strong> :&nbsp;</span>
        </p><pre><code class="language-text-plain">ssh debian@192.168.240.147 ip -c a</code></pre><pre><code class="language-text-plain">ssh debian@192.168.240.147 cat /tmp/ports.txt</code></pre>
        <p>&nbsp;</p>
        <p><span style="background-color:#ffffff;color:#303030;"><strong><u>Copier un fichier depuis le PC Windows vers la machine linux en SSH</u> :&nbsp;</strong></span>
        </p><pre><code class="language-text-plain">scp c:\temp\ports.txt debian@192.168.240.147:/tmp</code></pre>
        <p>&nbsp;</p>
        <p><span style="background-color:#ffffff;color:#303030;"><strong><u>Vérifier le status ssh en cmd à distance depuis le PC Windows</u></strong> :&nbsp;</span>
        </p><pre><code class="language-text-plain">ssh debian@192.168.240.147 systemctl status ssh</code></pre>
        <p>&nbsp;</p>
        <p>&nbsp;</p>
      </div>
    </div>
  </body>

</html>